{"ts":1355689339407,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"ï»¿// wtfitem.js\r\n//  this item view is responible for creating the extended profile view (with recent tweets + stats)\r\n// it get's displayed by the app:dialog event \r\ndefine(function (require) {\r\n    $ = require('jquery'),\r\n    _ = require('underscoreM'),\r\n    Marionette = require('marionette'),\r\n    template = require('text!templates/wtf-item.htm'),\r\n    vent = require('vent');\r\n\r\n    return Marionette.ItemView.extend({\r\n        template: _.template(template),\r\n        tagName: 'p',\r\n        className: 'row-fluid',\r\n\r\n        events: {\r\n            'click a.user-profile-link': 'onProfileClick'\r\n        },\r\n\r\n        // when userprofile link clicks\r\n        //  create profiel model and recenttweets collection\r\n        // pass these onto compsite-profile view then\r\n        // pass this view to the app's modal event\r\n        onProfileClick: function (e) {\r\n            e.preventDefault();\r\n            var ProfileView = require('views/composite-profile');\r\n            var ProfileModel = require('models/models.profile');\r\n            var userProfile = new ProfileModel({ uid: this.model.get('uid') });\r\n            var TweetsModel = require('models/timelineCollection');\r\n            var recentTweets = new TweetsModel();\r\n            recentTweets.url = '/api/tweets/zirpen/' + this.model.get('uid') + '/0/5';\r\n\r\n            $.when(userProfile.fetch()).then(function () {\r\n                var view = new ProfileView({ model: userProfile, collection: recentTweets });\r\n                vent.trigger('app:dialog', view);\r\n                recentTweets.fetch();\r\n            });\r\n        }\r\n    });\r\n});\r\n\r\n"]],"start1":0,"start2":0,"length1":0,"length2":1612}]],"length":1612}
